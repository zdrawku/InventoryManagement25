<div class="form-container">
  <h2>{{ isEditMode() ? 'Edit Equipment' : 'Add New Equipment' }}</h2>

  @if (errorMessage()) {
    <div class="error-message">{{ errorMessage() }}</div>
  }

  @if (isLoading() && isEditMode()) {
    <div class="loading">Loading equipment...</div>
  } @else {
    <form (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="name">Name *</label>
        <input
          type="text"
          id="name"
          [value]="equipment().name"
          (input)="updateField('name', $any($event.target).value)"
          required
          placeholder="Enter equipment name"
        />
      </div>

      <div class="form-group">
        <label for="type">Type *</label>
        <input
          type="text"
          id="type"
          [value]="equipment().type"
          (input)="updateField('type', $any($event.target).value)"
          required
          placeholder="Enter equipment type (e.g., Laptop, Projector)"
        />
      </div>

      <div class="form-group">
        <label for="serialNumber">Serial Number</label>
        <input
          type="text"
          id="serialNumber"
          [value]="equipment().serialNumber"
          (input)="updateField('serialNumber', $any($event.target).value)"
          placeholder="Enter serial number"
        />
      </div>

      <div class="form-group">
        <label for="condition">Condition *</label>
        <select
          id="condition"
          [value]="equipment().condition"
          (change)="updateField('condition', $any($event.target).value)"
          required
        >
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Fair">Fair</option>
          <option value="Damaged">Damaged</option>
        </select>
      </div>

      <div class="form-group">
        <label for="status">Status *</label>
        <select
          id="status"
          [value]="equipment().status"
          (change)="updateField('status', $any($event.target).value)"
          required
        >
          <option value="Available">Available</option>
          <option value="CheckedOut">Checked Out</option>
          <option value="UnderRepair">Under Repair</option>
          <option value="Retired">Retired</option>
        </select>
      </div>

      <div class="form-group">
        <label for="location">Location *</label>
        <input
          type="text"
          id="location"
          [value]="equipment().location"
          (input)="updateField('location', $any($event.target).value)"
          required
          placeholder="Enter location (e.g., Room 101)"
        />
      </div>

      <div class="form-group">
        <label for="photoUrl">Photo URL</label>
        <input
          type="url"
          id="photoUrl"
          [value]="equipment().photoUrl"
          (input)="updateField('photoUrl', $any($event.target).value)"
          placeholder="Enter photo URL"
        />
      </div>

      @if (equipment().photoUrl) {
        <div class="photo-preview">
          <img [src]="equipment().photoUrl" alt="Equipment preview" />
        </div>
      }

      <div class="form-actions">
        <button type="submit" [disabled]="isLoading()" class="btn btn-primary">
          @if (isLoading()) {
            <span>Saving...</span>
          } @else {
            <span>{{ isEditMode() ? 'Update' : 'Create' }}</span>
          }
        </button>
        <button type="button" (click)="cancel()" class="btn btn-secondary">Cancel</button>
      </div>
    </form>
  }
</div>
